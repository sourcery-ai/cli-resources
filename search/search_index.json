{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Sourcery CLI Resources","text":"<p>Code examples &amp; design patterns for Python CLI applications.</p>"},{"location":"#libraries-used","title":"Libraries Used","text":"<ul> <li>typer</li> <li>Pydantic</li> <li>sqlite-utils</li> <li>Rich</li> </ul>"},{"location":"db-path-config/","title":"Configure the Path of a SQLite Database","text":"","tags":["configuration"]},{"location":"db-path-config/#overview","title":"Overview","text":"<p>We want to use different databases in the different environments:</p> <ul> <li>development</li> <li>tests</li> <li>production / live</li> </ul> <p>We use <code>pydantic.Settings</code> and an environment variable to make the path configurable.</p> <ul> <li>For development: set the environment variable.</li> <li>For tests: Use a pytest fixture with <code>tmpdir</code> to define a custom path.</li> </ul>","tags":["configuration"]},{"location":"db-path-config/#config","title":"Config","text":"<p>In a <code>config.py</code>:</p> <pre><code>from pathlib import Path\nfrom pydantic import BaseSettings, Field\nfrom sqlite_utils import Database\nfrom pycon_catalogue.initialize import init_db\nclass Settings(BaseSettings):\ndb_path: Path = Field(\nPath.home() / \"pycon-catalogue.db\", env=\"APP_NAME_DB_PATH\"\n)\ndef db(self) -&gt; Database:\nreturn Database(self.db_path)\nsettings: Settings = Settings()\n</code></pre>","tags":["configuration"]},{"location":"db-path-config/#setting-a-development-database","title":"Setting a Development Database","text":"<pre><code>export APP_NAME_DB_PATH=$HOME/dev-app-name.db\n</code></pre>","tags":["configuration"]},{"location":"db-path-config/#using-a-temporary-database-for-tests","title":"Using a Temporary Database for Tests","text":"<p>Use a db in <code>tmpdir</code>.</p> <pre><code>from pathlib import Path\nimport pytest\nfrom app_name import config\n@pytest.fixture(autouse=True)\ndef app_db_path(tmpdir):\nconfig.settings.db_path = Path(tmpdir / \"test-app-name.db\")\n</code></pre>","tags":["configuration"]},{"location":"tags/","title":"Tags","text":"<p>Following is a list of tags:</p>"},{"location":"tags/#configuration","title":"configuration","text":"<ul> <li>Configure the Path of a SQLite Database</li> </ul>"},{"location":"tags/","title":"Tags","text":"<p>Following is a list of tags:</p>"},{"location":"tags/#configuration","title":"configuration","text":"<ul> <li>Configure the Path of a SQLite Database</li> </ul>"}]}